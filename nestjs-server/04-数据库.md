# 数据库概念

## ORM

1. ORM 是什么？ 常见的 ORM 工具库有哪些？

- ORM(Object Relational Mapping) 对象关系树，其主要作用是在编程中，把面向对象的概念
  跟数据库中的概念对应起来。

```lua
Object < - - >   Mapping  < - - >  DB
```

```lua
# 传统SQL
SELECT id,first_name,last_name,phone,birth_date,sec FROM persons WHERE id = 10

# 代码：
res = db.execSql(sql)
name = res[0]['FIRST_NAME']

# ORM写法：
p = Person.get(10)
name = p.first_name
```

- ORM 特点
  - 方便维护： 数据模型定义在同一个地方，利于重构
  - 代码量少，对接多种库： 代码逻辑更易懂
  - 工具多，自动化能力强： 数据库删除关联数据，事务操作等。

2. 集成 TypeORM,学习 TypeORM CLI 的使用，创建接口并返回数据？
3. 加餐：其他数据库 MongoDB & Mongoose

## QueryBuilder

QueryBuilder 是 TypeORM 最强大的功能之一，它允许你使用优雅便捷的语法构建 SQL 查询，执行并获得
自动转换的实体。
示例：

```js
const firstUser = await connection
  .getRepository(User)
  .createQueryBuilder("user")
  .where("user.id = :id", { id: 1 })
  .getOne();
```

```lua
SELECT
  user.id as userId,
  user.firstName as userFirstName,
  user.lastName as userLastName
FROM users user
WHERE user.id = 1
```
