# 注解

## 参数

```lua
                              @Params()  |- - - @Query()
                                |        |
                                V        V
@Post() ->  | POST /api/v1/user/4?myquery=true  HTTP/1.1 |
            |- - - - - - -  - - - - - -  - - - - - - - - |
            | HOST: localhost:3000                       |
            |- - - - - -  - - - - -  - - - -  - - - -  - |  - - >   @Req()
@Headers()->| Content-Type: application/json             |
            |- - -  - - -  - - - -  - - -  - - - -  - -  |
@Body()  -> | { message: "hello world" }                 |
            |- - - -  - - -  - - - - -  - - - - - -  - - |
```

## 局部过滤器

- 使用 cli 创建文件
- 在 filters 目录下创建名为 typeorm.filter.ts 的文件：

```sh
nest g f filters/typeorm --flat --no-spec
```

- 使用

1. 控制器中 `user.controller.ts`:

```ts
@Controller("user")
// 使用局部过滤器
@UseFilters(new TypeormFilter())
export class UserController {}

// 这部分可以单独分到一个文件中，供其他模块使用
export function TypeormDecorator() {
  return UseFilters(new TypeormFilter());
}

@Controller("user")
// 使用局部过滤器
@TypeormDecorator()
export class UserController {}
```
